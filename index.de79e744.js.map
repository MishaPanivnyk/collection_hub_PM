{"mappings":"AAAA,IAAMA,YAAcC,SAASC,cAAc,gBACrCC,YAAcF,SAASC,cAAc,mBACrCE,YAAcH,SAASC,cAAc,yBAErCG,QAAU,CAChBA,YAAsB,CACpBC,KAAM,YAGJC,SAAWC,OAAOC,YAEhBC,OAAS,OACTC,IAAM,GAAqBC,OAAlBJ,OAAOK,YAGtB,SAASC,YAAYC,GACnB,IAAKP,OAAOQ,gBAAkBC,UAAUC,YAKtC,OAJIV,OAAOQ,eACTG,QAAQC,MAAM,kCAEhBC,WAAWb,OAAOc,gBAAiBd,OAAOe,kBAG5CN,UAAUC,YAAYM,oBACpB,SAAAC,GACEJ,WACEI,EAAIC,OAAOC,SAASC,QAAQ,GAC5BH,EAAIC,OAAOG,UAAUD,QAAQ,OAGjC,SAAAE,GACEX,QAAQC,MAAMU,GACdT,WAAWb,OAAOc,gBAAiBd,OAAOe,qBAKhD,SAASF,WAAWM,EAAUE,GAC5B,IAAIE,EAAM,uDAAuEnB,OAAhBe,EAAS,SAAyBf,OAAlBiB,EAAU,UAAiCjB,OAAzBJ,OAAOwB,SAAS,WAAapB,OAAJD,KAE5HsB,MAAMF,GACHG,MAAK,SAAUC,GAEd,OADWA,EAASC,UAGrBF,MAAK,SAAUG,GACd,IAAIC,EAAUC,KAAKC,MAAMH,EAAKI,KAAKC,KAAOhC,QAC1CL,QAAQsC,YAAYC,MACN,KAAZrC,SAAkB+B,EAAqB,EAAXA,EAAgB,EAAI,GAClDjC,QAAQwC,YAAcR,EAAKhC,QAAQ,GAAGwC,YACtCxC,QAAQyC,OAAST,EAAKhC,QAAQ,GAAG0C,QAElCb,MAAK,WACJc,oBAIN,SAASA,iBACPhD,YAAYiD,UAAY,4BAAmDrC,OAAvBJ,OAAO0C,aAAa,KAAkBtC,OAAfP,QAAQyC,OAAO,WAE1F3C,YAAY8C,UAAY,GAEErC,OAFCP,QAAQsC,YAAYC,MAAMhB,QACnD,GACA,0BAAiChB,OAATL,SAAS,WACnCH,YAAY6C,UAAY5C,QAAQwC,YAlDlC/B","sources":["src/assets/js/weather.js"],"sourcesContent":["const iconElement = document.querySelector('.weatherIcon');\nconst tempElement = document.querySelector('.weatherValue p');\nconst descElement = document.querySelector('.weatherDescription p');\n\nconst weather = {};\nweather.temperature = {\n  unit: 'celsius',\n};\n\nvar tempUnit = CONFIG.weatherUnit;\n\nconst KELVIN = 273.15;\nconst key = `${CONFIG.weatherKey}`;\nsetPosition();\n\nfunction setPosition(position) {\n  if (!CONFIG.trackLocation || !navigator.geolocation) {\n    if (CONFIG.trackLocation) {\n      console.error('Geolocation not available');\n    }\n    getWeather(CONFIG.defaultLatitude, CONFIG.defaultLongitude);\n    return;\n  }\n  navigator.geolocation.getCurrentPosition(\n    pos => {\n      getWeather(\n        pos.coords.latitude.toFixed(3),\n        pos.coords.longitude.toFixed(3)\n      );\n    },\n    err => {\n      console.error(err);\n      getWeather(CONFIG.defaultLatitude, CONFIG.defaultLongitude);\n    }\n  );\n}\n\nfunction getWeather(latitude, longitude) {\n  let api = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&lang=${CONFIG.language}&appid=${key}`;\n  // let api = `https://api.openweathermap.org/data/3.0/weather?lat=${latitude}&lon=${longitude}&lang=${CONFIG.language}&appid=${key}`;\n  fetch(api)\n    .then(function (response) {\n      let data = response.json();\n      return data;\n    })\n    .then(function (data) {\n      let celsius = Math.floor(data.main.temp - KELVIN);\n      weather.temperature.value =\n        tempUnit == 'C' ? celsius : (celsius * 9) / 5 + 32;\n      weather.description = data.weather[0].description;\n      weather.iconId = data.weather[0].icon;\n    })\n    .then(function () {\n      displayWeather();\n    });\n}\n\nfunction displayWeather() {\n  iconElement.innerHTML = `<img src=\"./assets/icons/${CONFIG.weatherIcons}/${weather.iconId}.png\"/>`;\n  // iconElement.innerHTML = `<img src=\"http://openweathermap.org/img/w/${weather.iconId}.png`;\n  tempElement.innerHTML = `${weather.temperature.value.toFixed(\n    0\n  )}Â°<span class=\"darkfg\">${tempUnit}</span>`;\n  descElement.innerHTML = weather.description;\n}\n"],"names":["iconElement","document","querySelector","tempElement","descElement","weather","unit","tempUnit","CONFIG","weatherUnit","KELVIN","key","concat","weatherKey","setPosition","position","trackLocation","navigator","geolocation","console","error","getWeather","defaultLatitude","defaultLongitude","getCurrentPosition","pos","coords","latitude","toFixed","longitude","err","api","language","fetch","then","response","json","data","celsius","Math","floor","main","temp","temperature","value","description","iconId","icon","displayWeather","innerHTML","weatherIcons"],"version":3,"file":"index.de79e744.js.map"}